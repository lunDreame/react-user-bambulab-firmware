(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,a,t){},18:function(e,a,t){},23:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),s=t(7),o=t.n(s),l=(t(17),t(25));t(18);var r=function(){const[e,a]=Object(n.useState)(""),[t,s]=Object(n.useState)(!1),[o,r]=Object(n.useState)(""),[i,m]=Object(n.useState)(""),[u,d]=Object(n.useState)(!1),[p,E]=Object(n.useState)(""),[N,b]=Object(n.useState)(""),[g,v]=Object(n.useState)(!1),[C,h]=Object(n.useState)([]),[w,S]=Object(n.useState)(""),[O,P]=Object(n.useState)(!1),[f,j]=Object(n.useState)(!1),k=async a=>{try{const n=await l.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BAMBULAB,"/device-version"),{printerSerial:e,accessToken:a},{withCredentials:!0});if(n.data.success&&n.data.data){const{dev_id:e,version:a,...t}=n.data.data;h(t),v(!0)}}catch(t){console.error("Error fetching device version:",t)}},y=()=>{j(!1)};return c.a.createElement("div",{className:"app-container"},g?c.a.createElement("div",{className:"info-container"},c.a.createElement("h2",null,"Release Note & Repo Update"),c.a.createElement("div",{className:"release-note-container"},c.a.createElement("p",{className:"description"},e,":",c.a.createElement("button",{className:"release-note-button",onClick:()=>{P(!0);const e=C.firmware[0].description.replace(/\\n/g,"\n");S(e)}},"Release Note")),c.a.createElement("p",{className:"ams"},"AMS: ",c.a.createElement("span",{className:"ams-value"},JSON.stringify(C.ams[0])||"N/A"))),c.a.createElement("button",{onClick:()=>{j(!0)},className:"repo-update-button"},"Repo Update"),N&&c.a.createElement("p",{className:"repo-msg"},N)):c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",{className:"main-title"},"Printer Firmware Provisioning"),c.a.createElement("div",{className:"input-container"},c.a.createElement("input",{type:"text",value:e,onChange:e=>{const t=e.target.value.trim().toUpperCase();a(t),s(/^(00[MW]|03W|01[SPT]|030|039)[a-zA-Z0-9]{12}$/.test(t))},onFocus:()=>{d(!0)},onBlur:()=>{d(!1)},placeholder:"Printer Serial Number",className:"input-field ".concat(u&&!t?"invalid":"")}),u&&!t&&c.a.createElement("p",{className:"msg invalid"},"Invalid serial number.")),c.a.createElement("h2",{className:"sub-title"},"Bambu Lab Account"),c.a.createElement("div",{className:"input-container"},c.a.createElement("input",{type:"text",value:o,onChange:e=>r(e.target.value),placeholder:"Email or Phone Number",className:"input-field"})),c.a.createElement("div",{className:"input-container"},c.a.createElement("input",{type:"password",value:i,onChange:e=>m(e.target.value),placeholder:"Password",className:"input-field"})),c.a.createElement("button",{onClick:async()=>{try{const a=await l.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BAMBULAB,"/login"),{username:o,password:i},{withCredentials:!0});E(a.data.message),a.data.success&&a.data.data&&await k(a.data.data)}catch(e){E(e.message)}},className:"login-button"},"Login"),p&&c.a.createElement("p",{className:"login-msg"},p)),O&&c.a.createElement("div",{className:"modal-background",onClick:()=>P(!1)},c.a.createElement("div",{className:"modal",onClick:e=>e.stopPropagation()},c.a.createElement("span",{className:"close",onClick:()=>P(!1)},"\xd7"),c.a.createElement("p",{className:"release-note"},w))),f&&c.a.createElement("div",{className:"modal-background",onClick:y},c.a.createElement("div",{className:"modal",onClick:e=>e.stopPropagation()},c.a.createElement("p",null,"Do you want to proceed with the repository update?"),c.a.createElement("button",{onClick:async()=>{await(async()=>{try{const t=await l.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_GITHUB,"/update-file"),{printerSerial:e,currentVersion:C},{withCredentials:!0});b(t.data.message)}catch(a){console.error("Error updating device URL:",a)}})(),j(!1)},className:"confirmation-button"},"Yes"),c.a.createElement("button",{onClick:y,className:"confirmation-button"},"No"))))};var i=e=>{e&&e instanceof Function&&t.e(3).then(t.bind(null,26)).then(a=>{let{getCLS:t,getFID:n,getFCP:c,getLCP:s,getTTFB:o}=a;t(e),n(e),c(e),s(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(r,null))),i()},8:function(e,a,t){e.exports=t(23)}},[[8,1,2]]]);
//# sourceMappingURL=main.620b2835.chunk.js.map